---
// Imports
import Layout from '../layouts/Layout.astro';
import instagramIcon from '../assets/instagram.svg';
import tiktokIcon from '../assets/tiktok.svg';
import pinterestIcon from '../assets/pinterest.svg';

// Gestion des messages
const errorMessage = Astro.url.searchParams.get('error');
const successMessage = Astro.url.searchParams.get('success') ? 'Compte créé avec succès !' : null;
---

<Layout title="Inscription - Fac'Link">
  <main class="min-h-screen flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[#46005B] via-[#8B1A61] to-[#A43F5F] text-white">
    <div class="w-full max-w-md text-center px-4">
      <!-- Connexion -->
      <h2 class="text-2xl font-bold mb-4">Déjà un compte ?</h2>
      <a href="/connexion" class="inline-block bg-gradient-to-r from-[#FF7A5C] to-[#F43F7E] text-white rounded-full px-8 py-3 font-bold mb-6 shadow-md transition-transform hover:scale-105">
        Se connecter
      </a>

      <div class="w-full h-px bg-white opacity-25 my-6"></div>

      <!-- Titre -->
      <h2 class="texte-white text-2xl font-bold mb-6">Crée ton compte Fac’Link !</h2>

      <!-- Messages d'erreur ou de succès -->
      {errorMessage && (
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
          <strong class="font-bold">Erreur !</strong>
          <span class="block sm:inline"> {errorMessage}</span>
        </div>
      )}

      {successMessage && (
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
          <strong class="font-bold">Succès !</strong>
          <span class="block sm:inline"> {successMessage}</span>
        </div>
      )}

      <!-- Formulaire -->
      <form action="/api/inscription" method="POST" class="space-y-4 text-black">
        <input type="text" id="name" name="name" placeholder="Entrez votre Nom" required
               class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-90 placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF7A5C]" />

        <input type="text" id="firstname" name="firstname" placeholder="Entrez votre Prénom" required
               class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-90 placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF7A5C]" />

        <input type="email" id="email" name="email" placeholder="Entrez votre Email universitaire" required
               class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-90 placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF7A5C]" />

        <input type="password" id="password" name="password" placeholder="Entrez votre Mot de passe" required
               class="w-full px-4 py-3 rounded-xl bg-white bg-opacity-90 placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF7A5C]" />

        <!-- Conditions -->
        <div class="flex items-center pt-2">
          <input type="checkbox" id="accept-conditions" name="accept-conditions" required
                 class="mr-2 h-4 w-4 accent-white" />
          <label for="accept-conditions" class="text-sm text-white">
            Accepter les <a href="/conditiondutilisation" class="underline">Conditions d'utilisation</a> | <a href="/aspectlegaux" class="underline">Politique de confidentialité</a>
          </label>
        </div>

        <!-- Bouton inscription -->
        <button type="submit" class="w-full bg-gradient-to-r from-[#FF7A5C] to-[#F43F7E] text-white font-bold py-3 px-8 rounded-full mt-4 shadow-md transition-transform hover:scale-105">
          S’inscrire
        </button>
      </form>

      <!-- Réseaux sociaux -->
      <div class="flex justify-center space-x-6 mt-8">
        <a href="#" target="_blank" rel="noopener noreferrer">
          <img src={instagramIcon.src} alt="Instagram" class="w-10 h-10" />
        </a>
        <a href="#" target="_blank" rel="noopener noreferrer">
          <img src={tiktokIcon.src} alt="TikTok" class="w-10 h-10" />
        </a>
        <a href="#" target="_blank" rel="noopener noreferrer">
          <img src={pinterestIcon.src} alt="Pinterest" class="w-10 h-10" />
        </a>
      </div>
    </div>
  </main>
</Layout>
